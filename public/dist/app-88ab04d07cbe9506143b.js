webpackJsonp([0],{203:function(t,e){},204:function(t,e){},205:function(t,e){},207:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainWrapper=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(558)),o=n(24);n(338);var r=function(){function t(e,n,i,a,o,r,s,l,c,u){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.timeout=s,this.mapService=i,this.routesService=a,this.warsawApiService=o,this.geolocationService=r,this.loaderService=l,this.apiService=c,this.dataService=u,this.$scope=e,this.$rootScope=n,this.routes=null,this.selectedCategory=null,this.selectedRoute=null,this.selectedPolyline=null,this.showDetails=null,this.remainTimeInterval=null,this.onlineViewInterval=null,this.city=null}return t.$inject=["$scope","$rootScope","mapService","routesService","warsawApiService","geolocationService","$timeout","loaderService","apiService","dataService"],i(t,[{key:"$onInit",value:function(){var t=this;this.apiService.getCitiesPromise().then(function(e){t.city=e,t.mapInit(),t.categoriesInit()}),o(window).on("resize",function(){t.mobile=o(document).width()<900}).trigger("resize"),this.$rootScope.$on("favoritePlace",function(e,n){t.markerClick(t.mapService.getFakeMarker(n))})}},{key:"mapInit",value:function(){var t=this;this.geolocationService.getLocationPromise(this.city.name).then(function(e){t.city.bounds=[e.results[0].geometry.bounds.northeast,e.results[0].geometry.bounds.southwest],t.mapService.getGoogleMaps().then(function(){t.myPositionInit()})})}},{key:"myPositionInit",value:function(){var t=this;this.geolocationService.getPositionPromise().then(function(e){t.setPosition(t.getCoordsFromGeolocatorPosition(e))},function(e){t.geolocationService.openLocationModal({successCallback:function(e){t.setPosition(e.location)}})})}},{key:"setPosition",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.fitBoundsForMyPosition(t),this.mapService.myPositionInit(t),n&&this.geolocationService.setWatcher(function(t){e.mapService.myPositionUpdate(e.getCoordsFromGeolocatorPosition(t))}),this.loaderService.loaderOff(2e3)}},{key:"fitBoundsForMyPosition",value:function(t){var e=this.city.bounds.concat(t);this.mapService.fitBounds(e)}},{key:"categoriesInit",value:function(){this.apiService.getCategoriesPromise()}},{key:"timeInterval",value:function(){var t=this;this.remainTimeInterval=setInterval(function(){t.updateRemainTime()},3e4),this.updateRemainTime()}},{key:"categorySelectChange",value:function(t){var e=this;this.loaderService.loaderOn(),this.clearRoutes(),this.closeRouteDetails(),this.apiService.getPlacesForCategoryPromise(this.city.id,t.id).then(function(t){e.mapService.addMarkersPromise(t).then(function(t){t.forEach(function(t){t.addListener("click",function(){e.markerClick(t)})}),e.scrollToMap(),e.loaderService.loaderOff(1e3)})})}},{key:"markerClick",value:function(t){var e=this;this.loaderService.loaderOn(),this.routesService.clearTemporaryData(),this.routesService.getAvailableConnectionsPromise(this.mapService.myPositionMarker,t).then(function(n){e.routes=n,e.mapService.showSpecifiedMarkers(e.mapService.myPositionMarker.position,t.position),e.routes.length>0&&e.timeInterval(),e.scrollToMap(),e.showRoutesMobile(),e.loaderService.loaderOff(1e3)})}},{key:"loadMoreRoutes",value:function(){var t=this;this.loaderService.loaderOn(),this.routesService.getAvailableConnectionsPromise(this.mapService.myPositionMarker,this.routesService.currentDestinationMarker).then(function(e){t.routes=t.routes.concat(e),t.routes.length>0&&t.updateRemainTime(),t.loaderService.loaderOff(1e3)})}},{key:"showRouteDetails",value:function(t){var e=this;this.selectedRoute=t,this.mapService.drawPolylinesPromise(t).then(function(t){t.forEach(function(t){t.addListener("click",function(){e.polylineClick(t)})})}),this.timeout(function(){e.showDetails=!0,e.mobile&&e.hideRoutesMobile()},250)}},{key:"closeRouteDetails",value:function(){var t=this;this.showDetails=null,this.mapService.clearPolylines(),this.mapService.clearOnlineVehicles(),this.mapService.clearLineMarkers(),clearInterval(this.onlineViewInterval),this.timeout(function(){t.selectedRoute=null},500)}},{key:"closeRoutesList",value:function(){this.selectedCategory?this.categorySelectChange(this.selectedCategory):(this.loaderService.loaderOn(),this.mapService.clearAll(),this.clearRoutes(),this.scrollUp(),this.loaderService.loaderOff(2e3))}},{key:"clearRoutes",value:function(){this.routes=null,clearInterval(this.remainTimeInterval),this.remainTimeInterval=null}},{key:"updateRemainTime",value:function(){var t=this,e=!1;this.routes.forEach(function(n,i,a){if(!n.departure_time)return e&&a.splice(i,1),void(e=!0);var o=Math.floor((n.departure_time.value-Date.now()/1e3)/60);t.timeout(function(){n.remaining_time=o,o<-1?(a.splice(i,1),t.routes.length<4&&t.loadMoreRoutes()):o<3&&t.flashEffect(n)})})}},{key:"polylineClick",value:function(t){var e=this;"TRANSIT"!==t.line_info.travel_mode||"BUS"!==t.line_info.vehicle_type&&"TRAM"!==t.line_info.vehicle_type||(clearInterval(this.onlineViewInterval),this.mapService.clearOnlineVehicles(),this.mapService.clearLineMarkers(),this.onlineViewInterval&&this.selectedPolyline===t?this.selectedPolyline=null:(this.geolocationService.getStopsPromise(t.line_info.line_number,this.city).then(function(n){e.mapService.drawMarkersAndPolylineForLine(n,t).addListener("click",function(){clearInterval(e.onlineViewInterval),e.mapService.clearOnlineVehicles(),e.mapService.clearLineMarkers()})}),this.onlineViewInterval=setInterval(function(){e.playOnlineView(t)},5e3),this.playOnlineView(t)))}},{key:"playOnlineView",value:function(t){var e=this;this.selectedPolyline=t;var n=this.warsawApiService.vehiclesTypes[t.line_info.vehicle_type];this.warsawApiService.getVehiclesPositionsPromise(n,t.line_info.line_number).then(function(n){e.mapService.drawOnlineVehicles(n.result,t.line_info)})}},{key:"flashEffect",value:function(t){t.flash=!0,this.timeout(function(){t.flash=!1},1e3)}},{key:"getCoordsFromGeolocatorPosition",value:function(t){return{lat:t.coords.latitude,lng:t.coords.longitude}}},{key:"scrollToMap",value:function(){if(this.mobile){var t=o("#map");t.offset().top>100&&o(".mainWrapper").animate({scrollTop:t.offset().top},"slow")}}},{key:"scrollUp",value:function(){o(".mainWrapper").animate({scrollTop:0},"slow")}},{key:"showRoutesMobile",value:function(){this.mobile&&setTimeout(function(){o(".mainWrapper__routesListWrapper").addClass("slide")},200)}},{key:"hideRoutesMobile",value:function(){this.mobile&&o(".mainWrapper__routesListWrapper").removeClass("slide")}},{key:"mobileMapClick",value:function(){this.mobile&&this.hideRoutesMobile()}}]),t}();e.MainWrapper={template:a.default,controller:r}},208:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AddNewPlaceModal=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(559)),o=function(){function t(e,n,i,a){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.geolocationService=e,this.dataService=n,this.apiService=i,this.alertsService=a,this.loading=!1,this.editMode=!1}return t.$inject=["geolocationService","dataService","apiService","alertsService"],i(t,[{key:"$onInit",value:function(){this.resolve.place&&(this.editMode=!0,this.edited=!1,this.fetchPlaceData())}},{key:"fetchPlaceData",value:function(){this.name=this.resolve.place.name,this.position=this.resolve.place.location,this.city=this.dataService.getCityById(this.resolve.place.city_id),this.category=this.dataService.getCategoryById(this.resolve.place.category_id),this.description=this.resolve.place.description}},{key:"addNewPlace",value:function(){var t=this,e=this.parseData();this.loading=!0,this.apiService.addNewPlacePromise(e).then(function(e){t.close(),t.alertsService.addAlert("success",e),t.loading=!1})}},{key:"acceptEdited",value:function(){var t=this,e=this.parseData();this.loading=!0,this.apiService.moderatePlacePromise(this.resolve.place.id,this.dataService.MODERATE_STATUSES.accept,e).then(function(e){t.close(),t.loading=!1,t.resolve.successCallback()})}},{key:"parseData",value:function(){var t={name:this.name,category_id:this.category.id,city_id:this.city.id,lat:this.position.location.lat,lng:this.position.location.lng};return this.description&&(t.description=this.description),t}},{key:"isValid",value:function(){return this.name&&this.position&&this.position.location&&this.city&&this.category}},{key:"isEdited",value:function(){return this.name!==this.resolve.place.name||this.position!==this.resolve.place.location||this.city!==this.dataService.getCityById(this.resolve.place.city_id)||this.category!==this.dataService.getCategoryById(this.resolve.place.category_id)||this.description!==this.resolve.place.description}}]),t}();e.AddNewPlaceModal={template:a.default,controller:o,bindings:{resolve:"<",close:"&",dismiss:"&"}}},209:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FavoritePlacesModal=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(560)),o=function(){function t(e,n,i,a,o){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiService=e,this.dataService=n,this.$timeout=i,this.geolocationService=a,this.$rootScope=o,this.loading=!0}return t.$inject=["apiService","dataService","$timeout","geolocationService","$rootScope"],i(t,[{key:"$onInit",value:function(){var t=this;this.apiService.getFavoritePlacesListPromise().then(function(e){if(0!==e.length){var n=0;e.forEach(function(i,a){t.geolocationService.getLocationFromCoords(i.lat,i.lng).then(function(a){i.location=a,function(t){return t===e.length}(++n)&&t.$timeout(function(){t.dataService.favoritePlaces=e,t.loading=!1})})})}else t.$timeout(function(){t.dataService.favoritePlaces=e,t.loading=!1})})}},{key:"findRoutes",value:function(t){this.$rootScope.$broadcast("favoritePlace",t),this.close()}}]),t}();e.FavoritePlacesModal={template:a.default,controller:o,bindings:{resolve:"<",close:"&",dismiss:"&"}}},210:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocationModal=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(561)),o=function(){function t(e,n){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.geolocationService=e,this.$scope=n,this.saved=!1,this.position=null,this.successCallback=null,this.errorCallback=null}return t.$inject=["geolocationService","$scope"],i(t,[{key:"$onInit",value:function(){var t=this;this.getResolveData(),this.$scope.$on("modal.closing",function(e){t.saved||e.preventDefault()})}},{key:"getResolveData",value:function(){this.successCallback=this.resolve.successCallback,this.errorCallback=this.resolve.errorCallback}},{key:"getLocation",value:function(t){return this.geolocationService.getLocationPromise(t).then(function(t){return t.results.map(function(t){return{name:t.formatted_address,location:t.geometry.location}})})}},{key:"savePosition",value:function(){this.saved=!0,this.successCallback(this.position),this.close()}},{key:"isValid",value:function(){return this.position&&this.position.name&&this.position.location}}]),t}();e.LocationModal={template:a.default,controller:o,bindings:{resolve:"<",close:"&",dismiss:"&"}}},211:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModeratePlacesModal=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(562)),o=function(){function t(e,n,i,a,o){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiService=e,this.$timeout=n,this.dataService=i,this.geolocationService=a,this.alertsService=o,this.inactivePlaces=null,this.loading=!0}return t.$inject=["apiService","$timeout","dataService","geolocationService","alertsService"],i(t,[{key:"$onInit",value:function(){var t=this;this.apiService.getInactivePlacesPromise().then(function(e){if(0!==e.length){var n=!0;e.forEach(function(i,a){t.geolocationService.getLocationFromCoords(i.lat,i.lng).then(function(t){i.location=t,a===e.length-1&&(n=!1)})});!function i(){n?t.$timeout(function(){i()},500):(t.inactivePlaces=e,t.loading=!1)}()}else t.$timeout(function(){t.inactivePlaces=e,t.loading=!1})})}},{key:"acceptPlace",value:function(t){var e=this;t.loading=!0,this.apiService.moderatePlacePromise(t.id,this.dataService.MODERATE_STATUSES.accept).then(function(t){e.alertsService.addAlert("success","Miejsce zostało zaakceptowane"),e.removeFromList(t.id)})}},{key:"editPlace",value:function(t){var e=this;this.apiService.openAddNewPlaceModal({successCallback:function(){e.alertsService.addAlert("success","Miejsce zostało zaakceptowane po edycji"),e.removeFromList(t.id)},place:t})}},{key:"removePlace",value:function(t){var e=this;t.loading=!0,this.apiService.moderatePlacePromise(t.id,this.dataService.MODERATE_STATUSES.discard).then(function(t){e.alertsService.addAlert("success","Miejsce zostało odrzucone"),e.removeFromList(t.id)})}},{key:"removeFromList",value:function(t){var e=this.inactivePlaces.findIndex(function(e){return e.id===t});this.inactivePlaces.splice(e,1)}}]),t}();e.ModeratePlacesModal={template:a.default,controller:o,bindings:{resolve:"<",close:"&",dismiss:"&"}}},212:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignInModal=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(563)),o=function(){function t(e,n,i){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiService=e,this.alertsService=n,this.dataService=i,this.loading=!1}return t.$inject=["apiService","alertsService","dataService"],i(t,[{key:"signIn",value:function(){var t=this;this.loading=!0,this.apiService.signInPromise(this.user).then(function(e){t.close(),t.alertsService.addAlert("success",e)},function(e){t.loading=!1,t.user={},t.alertsService.addAlert("danger",e)})}},{key:"openRegisterModal",value:function(){this.close(),this.resolve.signUpCallback()}}]),t}();e.SignInModal={template:a.default,controller:o,bindings:{resolve:"<",close:"&",dismiss:"&"}}},213:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignUpModal=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(564)),o=function(){function t(e,n){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiService=e,this.alertsService=n,this.loading=!1}return t.$inject=["apiService","alertsService"],i(t,[{key:"signUp",value:function(){var t=this;this.loading=!0,this.apiService.signUpPromise(this.user).then(function(e){t.close(),t.alertsService.addAlert("success",e)},function(e){t.loading=!1,t.alertsService.addAlert("danger",e)})}}]),t}();e.SignUpModal={template:a.default,controller:o,bindings:{resolve:"<",close:"&",dismiss:"&"}}},214:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopMenu=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(565));n(339);var o=function(){function t(e,n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiService=e,this.userService=a,this.alertsService=n,this.loaderService=i,this.title="studentWStolicy.pl"}return i(t,[{key:"$onInit",value:function(){this.apiService.isAuthorizedPromise()}},{key:"signIn",value:function(){var t=this;this.userService.openSignInModal({signUpCallback:function(){t.signUp()}})}},{key:"signOut",value:function(){var t=this;this.loaderService.loaderOn(),this.apiService.signOutPromise().then(function(){t.loaderService.loaderOffPromise(2e3).then(function(){t.alertsService.addAlert("success","Zostałeś poprawnie wylogowany")})})}},{key:"signUp",value:function(){this.userService.openSignUpModal()}}]),t}();e.TopMenu={template:a.default,controller:o}},215:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserMenu=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(566));n(340);var o=function(){function t(e,n){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.apiService=e,this.alertsService=n}return t.$inject=["apiService","alertsService"],i(t,[{key:"addPlace",value:function(){var t=this;this.apiService.openAddNewPlaceModal({successCallback:function(){t.alertsService.addAlert("success","Propozycja została wysłana")}})}},{key:"newPlaces",value:function(){this.apiService.openModeratePlacesModal()}},{key:"favoritePlaces",value:function(){this.apiService.openFavoritePlacesModal()}}]),t}();e.UserMenu={template:a.default,controller:o}},216:function(t,e,n){"use strict";function i(t,e,n){n.html5Mode(!0).hashPrefix("!"),e.otherwise("/"),t.state("app",{url:"/",component:"mainWrapper"})}i.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},217:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=(n(24),null),o=function(){function t(e,n){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,this.$rootScope=e,this.$timeout=n,this.$rootScope.alerts=[]}return t.$inject=["$rootScope","$timeout"],i(t,[{key:"addAlert",value:function(t,e){var n=this;this.$timeout(function(){n.$rootScope.alerts.push({type:t,msg:e,close:function(){return a.closeAlert(n)}})})}},{key:"closeAlert",value:function(t){return this.closeAlertByIndex(this.$rootScope.alerts.indexOf(t))}},{key:"closeAlertByIndex",value:function(t){return this.$rootScope.alerts.splice(t,1)}},{key:"clear",value:function(){this.$rootScope.alerts=[]}}]),t}();e.default=o},218:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(24),o=function(){function t(e,n,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.API_URL="http://127.0.0.1:8000/api/",this.dataService=e,this.$uibModal=n,this.userService=i,this.$rootScope=a,this.addNewPlaceModal=null,this.moderatePlacesModal=null,this.favoritePlacesModal=null}return i(t,[{key:"signUpPromise",value:function(t){var e=this;return new Promise(function(n,i){a.ajax({type:"POST",url:e.API_URL+"user/sign-up",dataType:"JSON",data:t,success:function(){n("Dodano nowego użytkownika. Można się zalogować.")},error:function(t){t.responseJSON.errors.email&&i("Wprowadzony email nie jest poprawny lub jest już w użyciu."),i(t.responseJSON.message)}})})}},{key:"signInPromise",value:function(t){var e=this;return new Promise(function(n,i){a.ajax({type:"POST",url:e.API_URL+"user/sign-in",dataType:"JSON",data:t,success:function(t){localStorage.setItem("token",t.token),e.isAuthorizedPromise().then(function(){n("Zostałeś poprawnie zalogowany!")})},error:function(t){i("Podane dane są niepoprawne!")}})})}},{key:"signOutPromise",value:function(){var t=this;return new Promise(function(e){t.$rootScope.userInfo=null,localStorage.removeItem("token"),e()})}},{key:"isAuthorizedPromise",value:function(){var t=this;return new Promise(function(e,n){var i=localStorage.getItem("token");i&&a.ajax({type:"GET",data:{token:i},url:t.API_URL+"user",dataType:"JSON",success:function(n){t.$rootScope.userInfo=n.user,e()}})})}},{key:"getCitiesPromise",value:function(){var t=this;return new Promise(function(e){a.ajax({type:"GET",url:t.API_URL+"cities",dataType:"JSON",success:function(n){t.dataService.cities=n.cities,e(n.cities[0])}})})}},{key:"getCategoriesPromise",value:function(){var t=this;return new Promise(function(e,n){a.ajax({type:"GET",url:t.API_URL+"categories",dataType:"JSON",success:function(n){t.dataService.categories=n.categories,e(n.categories)}})})}},{key:"getPlacesForCategoryPromise",value:function(t,e){var n=this;return new Promise(function(i,o){a.ajax({type:"GET",url:n.API_URL+"places",dataType:"JSON",data:{city_id:t,category_id:e},success:function(t){n.$rootScope.userInfo?n.getFavoritePlacesListPromise().then(function(e){n.dataService.favoritePlaces=e,i(t.places)}):i(t.places)}})})}},{key:"addNewPlacePromise",value:function(t){var e=this;return new Promise(function(n,i){a.ajax({type:"POST",url:e.API_URL+"place?token="+e.userService.getToken(),dataType:"JSON",data:t,success:function(t){n("Twoja propozycja została wysłana")}})})}},{key:"moderatePlacePromise",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(o,r){var s={};i&&(s=i),s.is_accepted=e,a.ajax({type:"PUT",url:n.API_URL+"place/"+t+"?token="+n.userService.getToken(),dataType:"JSON",data:s,success:function(t){o(t.place)}})})}},{key:"getInactivePlacesPromise",value:function(){var t=this;return new Promise(function(e,n){a.ajax({type:"GET",url:t.API_URL+"places/inactive?token="+t.userService.getToken(),dataType:"JSON",success:function(t){e(t.places)}})})}},{key:"toggleFavoritePlace",value:function(t){var e=this;return new Promise(function(n,i){a.ajax({type:"POST",url:e.API_URL+"favorite-place?token="+e.userService.getToken(),dataType:"JSON",data:{place_id:t},success:function(t){n(t.place)}})})}},{key:"isFavoritePlacePromise",value:function(t){var e=this;return new Promise(function(n,i){a.ajax({type:"GET",url:e.API_URL+"favorite-place/"+t+"?token="+e.userService.getToken(),dataType:"JSON",success:function(t){n(t.id)}})})}},{key:"getFavoritePlacesListPromise",value:function(){var t=this;return new Promise(function(e,n){a.ajax({type:"GET",url:t.API_URL+"favorite-places?token="+t.userService.getToken(),dataType:"JSON",success:function(t){e(t.places)}})})}},{key:"openAddNewPlaceModal",value:function(t){this.addNewPlaceModal=this.$uibModal.open({component:"addNewPlaceModal",size:400,resolve:{successCallback:function(){return t.successCallback},place:function(){return t.place}}}),this.addNewPlaceModal.result.then(function(){},function(){})}},{key:"openModeratePlacesModal",value:function(){this.moderatePlacesModal=this.$uibModal.open({component:"moderatePlacesModal",size:400}),this.moderatePlacesModal.result.then(function(){},function(){})}},{key:"openFavoritePlacesModal",value:function(){this.favoritePlacesModal=this.$uibModal.open({component:"favoritePlacesModal",size:400}),this.favoritePlacesModal.result.then(function(){},function(){})}}]),t}();e.default=o},219:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.categories=null,this.cities=null,this.favoritePlaces=[],this.MODERATE_STATUSES={accept:1,discard:2}}return i(t,[{key:"getCityById",value:function(t){return this.cities.find(function(e){return e.id===t})}},{key:"getCategoryById",value:function(t){return this.categories.find(function(e){return e.id===t})}},{key:"isFavoritePlace",value:function(t){return this.favoritePlaces.find(function(e){return e.id===t})}}]),t}();e.default=a},220:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(24),o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$uibModal=e,this.KEY="AIzaSyA0nEprrpvg0haHFR9vZjlum7GYhmWJXAA",this.CITY_DATA_URL="https://maps.googleapis.com/maps/api/geocode/json",this.ERROR_CODES={NOT_SUPPORTED:0,PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3,UNKNOWN_ERR:4}}return i(t,[{key:"getPositionPromise",value:function(){var t=this;return new Promise(function(e,n){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e(t)},function(e){switch(e.code){case e.PERMISSION_DENIED:n(t.ERROR_CODES.PERMISSION_DENIED);break;case e.POSITION_UNAVAILABLE:n(t.ERROR_CODES.POSITION_UNAVAILABLE);break;case e.TIMEOUT:n(t.ERROR_CODES.TIMEOUT);break;case e.UNKNOWN_ERROR:n(t.ERROR_CODES.UNKNOWN_ERROR)}}):n(t.ERROR_CODES.NOT_SUPPORTED)})}},{key:"setWatcher",value:function(t){this.watcher=navigator.geolocation.watchPosition(t,function(){},{enableHighAccuracy:!0})}},{key:"openLocationModal",value:function(t){var e=t&&t.successCallback?t.successCallback:null,n=t&&t.errorCallback?t.errorCallback:null;this.locationModal=this.$uibModal.open({component:"locationModal",size:400,resolve:{successCallback:function(){return e},errorCallback:function(){return n}}}),this.locationModal.result.then(function(){},function(){})}},{key:"getLocationPromise",value:function(t){var e=this;return new Promise(function(n,i){var o={key:e.KEY,address:t,language:"pl",sensor:!1};a.get({url:e.CITY_DATA_URL,data:o,dataType:"JSON",success:function(t){n(t)}})})}},{key:"getLocationFromCoordsPromise",value:function(t,e){var n=this;return new Promise(function(i,o){var r={key:n.KEY,latlng:t+","+e,language:"pl"};return a.get({url:n.CITY_DATA_URL,data:r,dataType:"JSON",success:function(t){i(t)}})})}},{key:"getLocation",value:function(t){return this.getLocationPromise(t).then(function(t){return t.results.map(function(t){return{name:t.formatted_address,location:t.geometry.location}})})}},{key:"getLocationFromCoords",value:function(t,e){return this.getLocationFromCoordsPromise(t,e).then(function(t){return{name:t.results[0].formatted_address,location:t.results[0].geometry.location}})}},{key:"getStopsPromise",value:function(t,e){var n=this,i="http://www.ztm.waw.pl/rozklad_nowy.php?c=182&l=1&q="+t;return new Promise(function(t,o){a.get({url:i,success:function(i){var o=[];a(i).find(".LiniaTrasa0:first-of-type tr:not(:first-child)").each(function(t,n){n=a(n);var i=a.trim(n.find(".pn").text()+" "+n.find(".op").text());i.length>0&&o.push(i+" przystanek, "+e.name)}),n.getStopsMarkersPromise(o).then(function(e){t(e)})}})})}},{key:"getStopsMarkersPromise",value:function(t){var e=this,n=new Array(t.length).fill(null),i=0,o={key:this.KEY,language:"pl"};return new Promise(function(r,s){for(var l=function(s){o.address=t[s],a.get({url:e.CITY_DATA_URL,data:o,dataType:"JSON",success:function(a){if(1===a.results.length)n[s]={name:t[s],position:a.results[0].geometry.location};else if(a.results.length>1){!function i(){if(n[s-1]){for(var o=e.getDistanceBetweenStops(n[s-1].position,a.results[0].geometry.location),r=0,l=1;l<a.results.length;l++)o>e.getDistanceBetweenStops(n[s-1].position,a.results[l].geometry.location)&&(r=l);n[s]={name:t[s],position:a.results[r].geometry.location}}else setTimeout(function(){i()},500)}()}++i===t.length&&(n=n.filter(function(t){return null!==t}),r(n))}})},c=0;c<t.length;c++)l(c)})}},{key:"getDistanceBetweenStops",value:function(t,e){var n=(e.lat-t.lat)*(Math.PI/180),i=(e.lng-t.lng)*(Math.PI/180),a=t.lat*(Math.PI/180),o=e.lat*(Math.PI/180),r=Math.sin(n/2)*Math.sin(n/2)+Math.cos(a)*Math.cos(o)*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}}]),t}();e.default=o},221:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e,n){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$rootScope=e,this.timeout=n}return t.$inject=["$rootScope","$timeout"],i(t,[{key:"loaderOn",value:function(){this.$rootScope.loader=!0}},{key:"loaderOff",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.timeout(function(){t.$rootScope.loader=!1},e)}},{key:"loaderOffPromise",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(n){t.timeout(function(){t.$rootScope.loader=!1,n()},e)})}}]),t}();e.default=a},222:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(112),o=null,r=n(111),s=n(24),l=function(){function t(e,n,i,a,o){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=null,this.mapWrapper=document.getElementById("map"),this.apiService=e,this.$rootScope=n,this.$compile=i,this.$timeout=a,this.dataService=o,this.config={center:{lat:51.919438,lng:19.14513599999998},disableDefaultUI:!0,zoom:7},this.pathColors={green:"#6aaf6a",blue:"#4682b4",grey:"#808080"},this.markers=[],this.pathMarkers=[],this.lineMarkers=[],this.infoWindows=[],this.onlineVehiclesMarkers=[],this.onlineViewPolyline=null,this.polylines=[],this.myPositionMarker=null,this.myPositionCoords=null,this.overlay=null,this.$rootScope.toggleFavoritePlace=function(t,e){var n=s(t.currentTarget);n.removeClass("fa-heart").addClass("fa-spinner"),r.apiService.toggleFavoritePlace(e).then(function(t){t?n.addClass("infoWindow__favorite--checked"):n.removeClass("infoWindow__favorite--checked"),n.removeClass("fa-spinner").addClass("fa-heart")})}}return i(t,[{key:"getGoogleMaps",value:function(){var t=this;return new Promise(function(e){a.KEY=t.KEY,a.load(function(n){o=n,t.drawMap(),e()})})}},{key:"myPositionInit",value:function(t){this.myPositionCoords=t;var e={position:this.myPositionCoords,title:"Moja pozycja",icon:{url:"/images/my_position.png",anchor:new o.maps.Point(8,8),size:new o.maps.Size(32,32),scaledSize:new o.maps.Size(16,16)},optimized:!1,map:this.map};this.myPositionMarker=new o.maps.Marker(e)}},{key:"myPositionUpdate",value:function(t){this.myPositionCoords=t,this.myPositionMarker.setPosition(this.myPositionCoords)}},{key:"drawMap",value:function(){this.map=new o.maps.Map(this.mapWrapper,this.config),this.overlay=new o.maps.OverlayView,this.overlay.draw=function(){this.getPanes().markerLayer.id="markerLayer"},this.overlay.setMap(this.map)}},{key:"fitBounds",value:function(t){var e=new o.maps.LatLngBounds;t.forEach(function(t){e.extend(t)}),this.map.fitBounds(e)}},{key:"addMarkersPromise",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(i,a){n&&e.clearMainMarkers(),t.forEach(function(t){var n=new o.maps.Marker({position:{lat:t.lat,lng:t.lng},map:e.map,title:t.name});n.place=t,e.markers.push(n)}),e.addInfoWindowsPromise().then(function(){i(e.markers)})})}},{key:"showSpecifiedMarkers",value:function(t,e){this.clearMainMarkers();var n={url:"/images/a.png",anchor:new o.maps.Point(12,12),size:new o.maps.Size(32,32),scaledSize:new o.maps.Size(24,24)},i={url:"/images/b.png",anchor:new o.maps.Point(12,12),size:new o.maps.Size(32,32),scaledSize:new o.maps.Size(24,24)};this.markers=[new o.maps.Marker({map:this.map,position:t,icon:n,title:"Pozycja początkowa"}),new o.maps.Marker({map:this.map,position:e,icon:i,title:"Pozycja końcowa"})]}},{key:"drawPolylinesPromise",value:function(t){var e=this;return new Promise(function(n,i){t.steps.forEach(function(t){e.color=e.color===e.pathColors.green?e.pathColors.blue:e.pathColors.green;var i={path:e.getPath(t.polyline.points),geodesic:!0,strokeOpacity:1,strokeWeight:4,map:e.map};"WALKING"===t.travel_mode?(i.strokeOpacity=0,i.strokeColor=e.pathColors.grey,i.icons=[{icon:{path:"M 0,-1 0,1",strokeOpacity:1,scale:3},offset:"0",repeat:"15px"}]):(e.color=e.color===e.pathColors.green?e.pathColors.blue:e.pathColors.green,i.strokeColor=e.color,e.drawMarkersForTransitStep(t));var a=new o.maps.Polyline(i);"TRANSIT"===t.travel_mode&&(a.line_info={travel_mode:t.travel_mode,line_number:t.transit_details.line.short_name,vehicle_type:t.transit_details.line.vehicle.type,vehicle_icon:t.transit_details.line.vehicle.icon}),e.polylines.push(a),n(e.polylines)})})}},{key:"drawMarkersForTransitStep",value:function(t){var e={url:"/images/stop.png",anchor:new o.maps.Point(8,8),size:new o.maps.Size(32,32),scaledSize:new o.maps.Size(16,16)};this.pathMarkers=this.pathMarkers.concat([new o.maps.Marker({map:this.map,position:t.transit_details.departure_stop.location,icon:e,title:t.transit_details.departure_stop.name}),new o.maps.Marker({map:this.map,position:t.transit_details.arrival_stop.location,icon:e,title:t.transit_details.arrival_stop.name})])}},{key:"drawMarkersAndPolylineForLine",value:function(t,e){var n=this,i={url:"/images/stop.png",anchor:new o.maps.Point(4,4),size:new o.maps.Size(32,32),scaledSize:new o.maps.Size(8,8)},a=[];return t.forEach(function(t){n.lineMarkers.push(new o.maps.Marker({map:n.map,position:t.position,icon:i,title:t.name})),a.push(t.position)}),this.onlineViewPolyline=new o.maps.Polyline({path:a,geodesic:!0,strokeColor:e.strokeColor,strokeOpacity:.4,strokeWeight:4,map:this.map}),this.onlineViewPolyline}},{key:"drawOnlineVehicles",value:function(t,e){var n=this;if(this.clearOnlineVehicles(),t&&0!==t.length){var i={url:e.vehicle_icon,anchor:new o.maps.Point(12,12),size:new o.maps.Size(30,30),scaledSize:new o.maps.Size(24,24)};t.forEach(function(t){n.onlineVehiclesMarkers.push(new o.maps.Marker({map:n.map,position:{lat:t.Lat,lng:t.Lon},icon:i,title:t.Lines+" - "+t.Time}))})}}},{key:"addInfoWindowsPromise",value:function(){var t=this;return new Promise(function(e,n){t.markers.forEach(function(e){var n=t.getInfoWindow(e.place.name,e.place.description,e.place.id),i=new o.maps.InfoWindow({content:n,maxWidth:200});t.infoWindows.push(i),e.addListener("mouseover",function(){t.infoWindows.forEach(function(t){t.close()}),i.open(t.map,e)})}),e()})}},{key:"clearMainMarkers",value:function(){this.clearMarkers(this.markers),this.markers=[]}},{key:"clearPathMarkers",value:function(){this.clearMarkers(this.pathMarkers),this.pathMarkers=[]}},{key:"clearLineMarkers",value:function(){this.clearMarkers(this.lineMarkers),this.lineMarkers=[],this.onlineViewPolyline&&(this.onlineViewPolyline.setMap(null),this.onlineViewPolyline=null)}},{key:"clearPolylines",value:function(){this.polylines.forEach(function(t){t.setMap(null)}),this.polylines=[],this.clearPathMarkers()}},{key:"clearOnlineVehicles",value:function(){this.clearMarkers(this.onlineVehiclesMarkers),this.onlineVehiclesMarkers=[]}},{key:"clearAll",value:function(){this.clearMainMarkers(),this.clearPathMarkers(),this.clearLineMarkers(),this.clearPolylines(),this.clearOnlineVehicles()}},{key:"getPath",value:function(t){var e=[];return r.decode(t,5).forEach(function(t){e.push({lat:t[0],lng:t[1]})}),e}},{key:"getFakeMarker",value:function(t){return new o.maps.Marker({position:{lat:t.lat,lng:t.lng},title:t.name})}},{key:"clearMarkers",value:function(t){t.forEach(function(t){t.setMap(null)})}},{key:"getInfoWindow",value:function(t,e,n){e||(e="");var i="";return this.dataService.isFavoritePlace(n)&&(i="infoWindow__favorite--checked"),this.$compile('<div class="infoWindow"><span class="infoWindow__title">'+t+'</span><p class="infoWindow__description">'+e+'</p><i ng-if="$root.userInfo" ng-click="$root.toggleFavoritePlace($event, '+n+')" class="fa fa-heart infoWindow__favorite '+i+'" aria-hidden="true"></i></div>')(this.$rootScope)[0]}}]),t}();e.default=l},223:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"getCategories",value:function(){return[{id:1,name:"Edukacja"},{id:2,name:"Sport"}]}},{key:"getPlacesForCategory",value:function(t){return 1===t?[{id:1,name:"SGGW - Rektorat",coordinates:{lat:52.1646495,lng:21.050429099999974}},{id:2,name:"UW",coordinates:{lat:52.2403463,lng:21.018601200000035}},{id:3,name:"WAT",coordinates:{lat:52.2531574,lng:20.899640599999998}}]:2===t?[{id:4,name:"Warszawianka",coordinates:{lat:52.19500230000001,lng:21.026096300000063}},{id:5,name:"Stadion Narodowy",coordinates:{lat:52.246948,lng:21.043015100000048}},{id:6,name:"Tor łyżwiarski",coordinates:{lat:52.1875359,lng:21.042436299999963}}]:void 0}}]),t}();e.default=a},224:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(33)),o=n(24),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url="https://maps.googleapis.com/maps/api/directions/json",this.key="AIzaSyA0nEprrpvg0haHFR9vZjlum7GYhmWJXAA",this.basicConf={key:this.key,alternatives:!0,mode:"transit"},this.currentDestinationMarker=null,this.lastDepartureTimestamp=null}return i(t,[{key:"getBasicConf",value:function(){return a.default.copy(this.basicConf)}},{key:"getAvailableConnectionsPromise",value:function(t,e){var n=this;return this.currentDestinationMarker=e,new Promise(function(i,a){var r=n.getBasicConf();r.origin=t.position.lat()+","+t.position.lng(),r.destination=e.position.lat()+","+e.position.lng(),n.lastDepartureTimestamp&&(r.departure_time=n.lastDepartureTimestamp),o.get({url:n.url,data:r,dataType:"JSON",success:function(t){i(n.parseData(t))}})})}},{key:"parseData",value:function(t){var e=this,n=[],i=a.default.copy(this.lastDepartureTimestamp);return t.routes.forEach(function(t){t.legs[0].departure_time&&(e.lastDepartureTimestamp=t.legs[0].departure_time.value+60),n.push(t.legs[0])}),i===this.lastDepartureTimestamp&&(this.lastDepartureTimestamp?this.lastDepartureTimestamp+=3600:this.lastDepartureTimestamp=o.now()+3600),n}},{key:"clearTemporaryData",value:function(){this.currentDestinationMarker=null,this.lastDepartureTimestamp=null}}]),t}();e.default=r},225:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=(n(24),function(){function t(e,n){"ngInject";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.API_URL="http://127.0.0.1:8000/api/",this.$uibModal=e,this.$rootScope=n,this.signInModal=null,this.signUpModal=null}return t.$inject=["$uibModal","$rootScope"],i(t,[{key:"openSignInModal",value:function(t){this.signInModal=this.$uibModal.open({component:"signInModal",size:400,resolve:{signUpCallback:function(){return t.signUpCallback}}}),this.signInModal.result.then(function(){},function(){})}},{key:"openSignUpModal",value:function(){this.signUpModal=this.$uibModal.open({component:"signUpModal",size:400}),this.signUpModal.result.then(function(){},function(){})}},{key:"getToken",value:function(){return localStorage.getItem("token")}}]),t}());e.default=a},226:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(33)),o=n(24),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url="https://api.um.warszawa.pl/api/action/busestrams_get/",this.key="a4b988a4-95f0-4f46-9459-c97b2131422c",this.vehiclesOnlineResourceId="f2e5503e-927d-4ad3-9500-4ab9e55deb59",this.stopsForLineResourceId="e923fa0e-d96c-43f9-ae6e-60518c9f3238",this.basicConf={apikey:this.key},this.vehiclesTypes={BUS:1,TRAM:2}}return i(t,[{key:"getBasicConf",value:function(){return a.default.copy(this.basicConf)}},{key:"getVehiclesPositionsPromise",value:function(t,e){var n=this;return new Promise(function(i,a){var r=n.getBasicConf();r.resource_id=n.vehiclesOnlineResourceId,r.type=t,r.line=e,o.get({url:n.url,data:r,dataType:"JSON",success:function(t){i(t)}})})}}]),t}();e.default=r},338:function(t,e){},339:function(t,e){},340:function(t,e){},558:function(t,e){t.exports='<div class="mainWrapper" ng-class="{\'mainWrapper--userMenu\': $root.userInfo}">\n\t<div class="mainWrapper__categorySelect mainWrapper__absoluteWrapper">\n\t\t\t<p>\n\t\t\t\tKategoria:\n\t\t\t</p>\n\t\t\t\n\t\t\t<ui-select ng-model="$ctrl.selectedCategory"\n\t\t\t           on-select="$ctrl.categorySelectChange($item)"\n\t\t\t           theme="bootstrap"\n\t\t\t           title="Wybierz kategorię"\n\t\t\t           append-to-body="true">\n\t\t\t\t\n\t\t\t\t<ui-select-match placeholder="Wybierz kategorię...">\n\t\t\t\t\t{{$select.selected.name}}\n\t\t\t\t</ui-select-match>\n\t\t\t\t\n\t\t\t\t<ui-select-choices repeat="category in $ctrl.dataService.categories">\n\t\t\t\t\t{{category.name}}\n\t\t\t\t</ui-select-choices>\n\t\t\t\n\t\t\t</ui-select>\n\t</div>\n\t\n\t<div class="mainWrapper__routesListWrapper mainWrapper__absoluteWrapper"\n\t     ng-if="$ctrl.routes"\n\t>\n\t\t\n\t\t<div class="mainWrapper__routesList">\n\t\t\t\n\t\t\t<div class="mainWrapper__absoluteWrapper__head">\n\t\t\t\t<div class="mainWrapper__absoluteWrapper__close">\n\t\t\t\t\t<i class="fa fa-times-circle-o" aria-hidden="true" ng-click="$ctrl.closeRoutesList()"></i>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\t\tDostępne połączenia:\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="mainWrapper__routesList__scrolled" ng-if="$ctrl.routes.length > 0">\n\t\t\t\t<ul>\n\t\t\t\t\t<li ng-repeat="route in $ctrl.routes | orderBy: \'departure_time.value\'"\n\t\t\t\t\t    class="mainWrapper__routeItem"\n\t\t\t\t\t    ng-class="{\'flash\': route.flash, \'closeDeparture\': route.remaining_time < 3, \'tooLate\': route.remaining_time < 0}"\n\t\t\t\t\t    ng-click="$ctrl.showRouteDetails(route)">\n\t\t\t\t\t\t<div class="mainWrapper__routeItem__description">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<p class="mainWrapper__routeItem__remainingTime" ng-if="route.remaining_time >= 0">Odjazd za: {{route.remaining_time}}</p>\n\t\t\t\t\t\t\t<p class="mainWrapper__routeItem__tooLate" ng-if="route.remaining_time < 0">Już odjechał</p>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<p>{{route.departure_time.text}} - {{route.arrival_time.text}}</p>\n\t\t\t\t\t\t\t<div class="mainWrapper__routeItem__symbolsPath">\n\t\t\t\t\t\t\t\t<div ng-repeat="step in route.steps" ng-switch="step.travel_mode">\n\t\t\t\t\t\t\t\t\t<div ng-switch-when="WALKING">\n\t\t\t\t\t\t\t\t\t\t<img ng-src="./../images/walk.png" alt="">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div ng-switch-when="TRANSIT">\n\t\t\t\t\t\t\t\t\t\t<img ng-src="{{step.transit_details.line.vehicle.icon}}" alt="vehicle">\n\t\t\t\t\t\t\t\t\t\t<span>{{step.transit_details.line.short_name}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<i class="fa fa-chevron-right" aria-hidden="true" ng-if="!$last"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="mainWrapper__routeItem__duration">\n\t\t\t\t\t\t\t{{route.duration.text}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t\n\t\t\t\t<div class="mainWrapper__showMore" ng-click="$ctrl.loadMoreRoutes()">\n\t\t\t\t\tPokaż więcej\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div ng-if="$ctrl.routes.length === 0" class="mainWrapper__noRoutes">\n\t\t\t\tBrak połączeń\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="mainWrapper__details"\n\t\t     ng-swipe-left="$ctrl.closeRouteDetails()"\n\t\t     ng-if="$ctrl.selectedRoute"\n\t\t     ng-class="{\'mainWrapper__details--show\': $ctrl.showDetails}"\n\t\t>\n\t\t\t\n\t\t\t<div class="mainWrapper__absoluteWrapper__head">\n\t\t\t\t<div class="mainWrapper__absoluteWrapper__close">\n\t\t\t\t\t<i class="fa fa-caret-square-o-left" aria-hidden="true" ng-click="$ctrl.closeRouteDetails()"></i>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\t\tSzczegóły przejazdu:\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="mainWrapper__details__content">\n\t\t\t\t<div class="mainWrapper__details__head">\n\t\t\t\t\t\t<p>{{$ctrl.selectedRoute.departure_time.text}} - {{$ctrl.selectedRoute.arrival_time.text}} | {{$ctrl.selectedRoute.duration.text}} | {{$ctrl.selectedRoute.distance.text}} </p>\n\t\t\t\t\t\t<p>Skąd: <span>{{$ctrl.selectedRoute.start_address}}</span></p>\n\t\t\t\t\t\t<p>Dokąd: <span>{{$ctrl.selectedRoute.end_address}}</span></p>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class="mainWrapper__details__steps">\n\t\t\t\t\t\n\t\t\t\t\t<div class="start">\n\t\t\t\t\t\t<b>{{$ctrl.selectedRoute.start_address}}</b>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-repeat="step in $ctrl.selectedRoute.steps track by $index" ng-switch="step.travel_mode">\n\t\t\t\t\t\t<div class="walk" ng-switch-when="WALKING">\n\t\t\t\t\t\t\t<div class="stepTime">\n\t\t\t\t\t\t\t\t<img ng-src="./../images/walk.png" alt="">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="stepDetails">\n\t\t\t\t\t\t\t\t<p>Pieszo</p>\n\t\t\t\t\t\t\t\t<p>Przewidywany czas: {{ step.duration.text }}</p>\n\t\t\t\t\t\t\t\t<p>Odległość: {{ step.distance.text }}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t\t<div class="transit" ng-switch-when="TRANSIT">\n\t\t\t\t\t\t\t<div class="stepTime">\n\t\t\t\t\t\t\t\t<p><b>{{step.transit_details.departure_time.text}}</b></p>\n\t\t\t\t\t\t\t\t<img ng-src="{{step.transit_details.line.vehicle.icon}}" alt="vehicle">\n\t\t\t\t\t\t\t\t<p><b>{{step.transit_details.arrival_time.text}}</b></p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="stepDetails">\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<b>{{step.transit_details.departure_stop.name}}</b>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<b>{{step.transit_details.line.short_name}}</b>\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-long-arrow-right" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t{{step.transit_details.headsign}}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>Liczba przystanków: <b>{{step.transit_details.num_stops}}</b></p>\n\t\t\t\t\t\t\t\t\t<p>Przewidywany czas: {{step.duration.text}}</p>\n\t\t\t\t\t\t\t\t\t<p>Odległość: {{step.distance.text}}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t<b>{{step.transit_details.arrival_stop.name}}</b>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="end">\n\t\t\t\t\t\t<b>{{$ctrl.selectedRoute.end_address}}</b>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t</div>\n\t\t\n\t<div class="mainWrapper__mapWrapper">\n\t\t<i class="fa fa-arrow-circle-o-up mainWrapper__scrollUp" ng-click="$ctrl.scrollUp()" ng-if="$ctrl.selectedCategory && $ctrl.mobile" aria-hidden="true"></i>\n\t\t<div class="mainWrapper__showRoutes" ng-if="$ctrl.routes && $ctrl.mobile" ng-click="$ctrl.showRoutesMobile()">\n\t\t\t<span>Pokaż połączenia</span>\n\t\t\t<i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i>\n\t\t</div>\n\t\t<div id="map" class="mainWrapper__map" ng-click="$ctrl.mobileMapClick()"></div>\n\t</div>\n</div>\n\n\n'},559:function(t,e){t.exports='<div class="sModal sModal--addNewPlaceModal">\n\t<div class="sModal__close" ng-click="$ctrl.close()"></div>\n\t<div class="sModal__header">\n\t\t<h1>\n\t\t\t<i class="fa fa-map-marker" aria-hidden="true"></i>\n\t\t\t<span ng-if="$root.userInfo.account_type === 2">\n\t\t\t\tZaproponuj nowe miejsce\n\t\t\t</span>\n\t\t\t<span ng-if="$root.userInfo.account_type !== 2">\n\t\t\t\t<span ng-if="!$ctrl.editMode">\n\t\t\t\t\tDodaj nowe miejsce\n\t\t\t\t</span>\n\t\t\t\t<span ng-if="$ctrl.editMode">\n\t\t\t\t\tEdytujesz proponowane miejsce\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t</h1>\n\t</div>\n\t<div class="sModal__body">\n\t\t<div class="loaderWrapper__loader loaderWrapper__loader--alone" ng-show="$ctrl.loading"></div>\n\t\t\n\t\t<div class="col-md-6 col-md-offset-3" ng-hide="$ctrl.loading">\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label for="name">Nazwa *</label>\n\t\t\t\t<input type="text" name="name" id="name" class="form-control" ng-model="$ctrl.name" ng-change="$ctrl.edited = true"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<div class="sModal--locationModal__search">\n\t\t\t\t\t<label>Adres *</label>\n\t\t\t\t\t<input type="text"\n\t\t\t\t\t       ng-model="$ctrl.position"\n\t\t\t\t\t       ng-change="$ctrl.edited = true"\n\t\t\t\t\t       placeholder="Adres..."\n\t\t\t\t\t       uib-typeahead="address as address.name for address in $ctrl.geolocationService.getLocation($viewValue)"\n\t\t\t\t\t       typeahead-loading="loadingLocations"\n\t\t\t\t\t       typeahead-no-results="noResults"\n\t\t\t\t\t       class="form-control">\n\t\t\t\t\t<i ng-show="loadingLocations" class="fa fa-spinner" aria-hidden="true"></i>\n\t\t\t\t\t<div ng-show="noResults">\n\t\t\t\t\t\t<i class="fa fa-times" aria-hidden="true"></i> Nic nie znaleziono\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label>Miasto *</label>\n\t\t\t\t<ui-select ng-model="$ctrl.city"\n\t\t\t\t           on-select="$ctrl.edited = true"\n\t\t\t\t           theme="bootstrap"\n\t\t\t\t           append-to-body="true">\n\t\t\t\t\t\n\t\t\t\t\t<ui-select-match placeholder="Miasto...">\n\t\t\t\t\t\t{{$select.selected.name}}\n\t\t\t\t\t</ui-select-match>\n\t\t\t\t\t\n\t\t\t\t\t<ui-select-choices repeat="city in $ctrl.dataService.cities">\n\t\t\t\t\t\t{{city.name}}\n\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label>Kategoria *</label>\n\t\t\t\t<ui-select ng-model="$ctrl.category"\n\t\t\t\t           on-select="$ctrl.edited = true"\n\t\t\t\t           theme="bootstrap"\n\t\t\t\t           append-to-body="true">\n\t\t\t\t\t\n\t\t\t\t\t<ui-select-match placeholder="Kategoria...">\n\t\t\t\t\t\t{{$select.selected.name}}\n\t\t\t\t\t</ui-select-match>\n\t\t\t\t\t\n\t\t\t\t\t<ui-select-choices repeat="category in $ctrl.dataService.categories">\n\t\t\t\t\t\t{{category.name}}\n\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="form-group">\n\t\t\t\t<label for="description">Opis</label>\n\t\t\t\t<textarea name="description"\n\t\t\t\t          id="description"\n\t\t\t\t          class="form-control"\n\t\t\t\t          style="resize: none"\n\t\t\t\t          rows="5"\n\t\t\t\t          ng-model="$ctrl.description"\n\t\t\t\t          ng-change="$ctrl.edited = true"\n\t\t\t\t></textarea>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t\t\n\t</div>\n\t<div class="sModal__footer">\n\t\t<button class="sModal__button"\n\t\t        ng-if="!$ctrl.editMode"\n\t\t        ng-click="$ctrl.addNewPlace()"\n\t\t        ng-class="{\'sModal__button--disabled\': !$ctrl.isValid()}"\n\t\t        ng-disabled="!$ctrl.isValid()">\n\t\t\t<span ng-if="$root.userInfo.account_type === 2">\n\t\t\t\tWyślij propozycję\n\t\t\t</span>\n\t\t\t<span ng-if="$root.userInfo.account_type !== 2">\n\t\t\t\tDodaj\n\t\t\t</span>\n\t\t</button>\n\t\t<button ng-if="$ctrl.editMode"\n\t\t        class="sModal__button"\n\t\t        ng-click="$ctrl.acceptEdited()"\n\t\t        ng-class="{\'sModal__button--disabled\': !$ctrl.isValid() || !$ctrl.isEdited()}"\n\t\t        ng-disabled="!$ctrl.isValid() || !$ctrl.isEdited()">\n\t\t\tZaakceptuj\n\t\t</button>\n\t</div>\n</div>'},560:function(t,e){t.exports='<div class="sModal sModal--moderatePlacesModal">\n\t<div class="sModal__close" ng-click="$ctrl.close()"></div>\n\t<div class="sModal__header">\n\t\t<h1>\n\t\t\t<i class="fa fa-heart" aria-hidden="true"></i>\n\t\t\tUlubione miejsca\n\t\t</h1>\n\t</div>\n\t<div class="sModal__body">\n\t\t<div ng-show="$ctrl.loading" class="loaderWrapper__loader loaderWrapper__loader--alone"></div>\n\t\t\n\t\t<div ng-hide="$ctrl.loading">\n\t\t\t<p ng-if="$ctrl.dataService.favoritePlaces.length === 0">\n\t\t\t\tBrak ulubionych miejsc.\n\t\t\t</p>\n\t\t\t<uib-accordion ng-if="$ctrl.dataService.favoritePlaces.length > 0">\n\t\t\t\t<div uib-accordion-group class="panel-default sModal--moderatePlacesModal__group" heading="{{place.name}}" ng-repeat="place in $ctrl.dataService.favoritePlaces">\n\t\t\t\t\t<div class="loaderWrapper__loader loaderWrapper__loader--alone" ng-show="place.loading"></div>\n\t\t\t\t\t<div ng-hide="place.loading">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="fieldLabel">Nazwa: </span>\n\t\t\t\t\t\t\t<span>{{ place.name }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="fieldLabel">Adres: </span>\n\t\t\t\t\t\t\t<span>{{ place.location.name }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="fieldLabel">Miasto: </span>\n\t\t\t\t\t\t\t<span>{{ $ctrl.dataService.getCityById(place.city_id).name }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="fieldLabel">Kategoria: </span>\n\t\t\t\t\t\t\t<span>{{ $ctrl.dataService.getCategoryById(place.category_id).name }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p ng-if="place.description.length > 0">\n\t\t\t\t\t\t\t<span class="fieldLabel">Opis: </span>\n\t\t\t\t\t\t\t<span>{{ place.description }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="sModal--moderatePlacesModal__buttons">\n\t\t\t\t\t\t\t<button class="sModal__button"\n\t\t\t\t\t\t\t        ng-click="$ctrl.findRoutes(place)">\n\t\t\t\t\t\t\t\tZnajdź połączenia\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</uib-accordion>\n\t\t</div>\n\t\n\t</div>\n</div>'},561:function(t,e){t.exports='<div class="sModal sModal--locationModal">\n\t<div class="sModal__header">\n\t\t<h1>\n\t\t\t<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\n\t\t\tBłąd lokalizacji\n\t\t</h1>\n\t</div>\n\t<div class="sModal__body">\n\t\t<p>Niestety serwis nie uzyskał dostępu do modułu lokalizacji.</p>\n\t\t<p>Podaj adres, bądź miejsce w którym się znajdujesz:</p>\n\t\t\n\t\t<div class="sModal--locationModal__search">\n\t\t\t<input type="text"\n\t\t\t       ng-model="$ctrl.position"\n\t\t\t       ng-keyup="$event.keyCode == 13 && $ctrl.isValid() && $ctrl.savePosition()"\n\t\t\t       placeholder="Adres..."\n\t\t\t       uib-typeahead="address as address.name for address in $ctrl.getLocation($viewValue)"\n\t\t\t       typeahead-loading="loadingLocations"\n\t\t\t       typeahead-no-results="noResults"\n\t\t\t       class="form-control">\n\t\t\t<i ng-show="loadingLocations" class="fa fa-spinner" aria-hidden="true"></i>\n\t\t\t<div ng-show="noResults">\n\t\t\t\t<i class="fa fa-times" aria-hidden="true"></i> Nic nie znaleziono\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t</div>\n\t<div class="sModal__footer">\n\t\t<button class="sModal__button"\n\t\t        ng-click="$ctrl.savePosition()"\n\t\t        ng-class="{\'sModal__button--disabled\': !$ctrl.isValid()}"\n\t\t        ng-disabled="!$ctrl.isValid()">\n\t\t\tZapisz pozycję\n\t\t</button>\n\t</div>\n</div>'},562:function(t,e){t.exports='<div class="sModal sModal--moderatePlacesModal">\n\t<div class="sModal__close" ng-click="$ctrl.close()"></div>\n\t<div class="sModal__header">\n\t\t<h1>\n\t\t\t<i class="fa fa-check-square-o" aria-hidden="true"></i>\n\t\t\tProponowane miejsca\n\t\t</h1>\n\t</div>\n\t<div class="sModal__body">\n\t\t<div ng-show="$ctrl.loading" class="loaderWrapper__loader loaderWrapper__loader--alone"></div>\n\t\t\n\t\t<div ng-hide="$ctrl.loading">\n\t\t\t<p ng-if="$ctrl.inactivePlaces.length === 0">\n\t\t\t\tBrak proponowanych miejsc.\n\t\t\t</p>\n\t\t\t<uib-accordion ng-if="$ctrl.inactivePlaces.length > 0">\n\t\t\t\t<div uib-accordion-group class="panel-default sModal--moderatePlacesModal__group" heading="{{place.name}}" ng-repeat="place in $ctrl.inactivePlaces">\n\t\t\t\t\t<div class="loaderWrapper__loader loaderWrapper__loader--alone" ng-show="place.loading"></div>\n\t\t\t\t\t<div ng-hide="place.loading">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="fieldLabel">Nazwa: </span>\n\t\t\t\t\t\t\t<span>{{ place.name }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="fieldLabel">Adres: </span>\n\t\t\t\t\t\t\t<span>{{ place.location.name }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="fieldLabel">Miasto: </span>\n\t\t\t\t\t\t\t<span>{{ $ctrl.dataService.getCityById(place.city_id).name }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<span class="fieldLabel">Kategoria: </span>\n\t\t\t\t\t\t\t<span>{{ $ctrl.dataService.getCategoryById(place.category_id).name }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p ng-if="place.description.length > 0">\n\t\t\t\t\t\t\t<span class="fieldLabel">Opis: </span>\n\t\t\t\t\t\t\t<span>{{ place.description }}</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="sModal--moderatePlacesModal__buttons">\n\t\t\t\t\t\t\t<button class="sModal__button"\n\t\t\t\t\t\t\t        ng-click="$ctrl.acceptPlace(place)">\n\t\t\t\t\t\t\t\tZaakceptuj\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class="sModal__button"\n\t\t\t\t\t\t\t        ng-click="$ctrl.editPlace(place)">\n\t\t\t\t\t\t\t\tEdytuj i zaakceptuj\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class="sModal__button"\n\t\t\t\t\t\t\t        ng-click="$ctrl.removePlace(place)">\n\t\t\t\t\t\t\t\tOdrzuć\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</uib-accordion>\n\t\t</div>\n\t\n\t</div>\n</div>'},563:function(t,e){t.exports='<div class="sModal sModal--signInModal">\n\t<div class="sModal__close" ng-click="$ctrl.close()"></div>\n\t<form name="form" ng-submit="$ctrl.signIn()" role="form">\n\t\n\t<div class="sModal__header">\n\t\t<h1>Logowanie</h1>\n\t</div>\n\t<div class="sModal__body">\n\t\t<div class="loaderWrapper__loader loaderWrapper__loader--alone" ng-show="$ctrl.loading"></div>\n\t\t\n\t\t<div class="col-md-6 col-md-offset-3" ng-hide="$ctrl.loading">\n\t\t\t\t<div class="form-group" ng-class="{ \'has-error\': form.email.$dirty && form.email.$error.required }">\n\t\t\t\t\t<label for="email">E-mail:</label>\n\t\t\t\t\t<input type="text" name="email" id="email" class="form-control" ng-model="$ctrl.user.email" required />\n\t\t\t\t\t<span ng-show="form.email.$dirty && form.email.$error.required" class="help-block">To pole jest wymagane</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group" ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }">\n\t\t\t\t\t<label for="password">Hasło</label>\n\t\t\t\t\t<input type="password" name="password" id="password" class="form-control" ng-model="$ctrl.user.password" required />\n\t\t\t\t\t<span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">To pole jest wymagane</span>\n\t\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="sModal__footer">\n\t\t<button class="sModal__button"\n\t\t        type="submit"\n\t\t        ng-class="{\'sModal__button--disabled\': form.$invalid}"\n\t\t        ng-disabled="form.$invalid">\n\t\t\tZaloguj\n\t\t</button>\n\t\t<p class="sModal--signInModal__signUp">\n\t\t\tNie posiadasz jeszcze konta?\n\t\t\t<span ng-click="$ctrl.openRegisterModal()">Zarejestruj się</span>\n\t\t</p>\n\t</div>\n\t\n\t</form>\n</div>'},564:function(t,e){t.exports='<div class="sModal sModal--signUpModal">\n\t<div class="sModal__close" ng-click="$ctrl.close()"></div>\n\t<form ng-submit="$ctrl.signUp()">\n\t\n\t<div class="sModal__header">\n\t\t<h1>Rejestracja</h1>\n\t</div>\n\t<div class="sModal__body">\n\t\t<div class="loaderWrapper__loader loaderWrapper__loader--alone" ng-show="$ctrl.loading"></div>\n\t\t\n\t\t<div class="col-md-6 col-md-offset-3" ng-hide="$ctrl.loading">\n\t\t\t\t<div class="form-group" ng-class="{ \'has-error\': form.username.$dirty && form.username.$error.required }">\n\t\t\t\t\t<label for="username">Nazwa użytkownika</label>\n\t\t\t\t\t<input type="text" name="username" id="username" class="form-control" ng-model="$ctrl.user.username" required />\n\t\t\t\t\t<span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">To pole jest wymaganne</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group" ng-class="{ \'has-error\': form.email.$dirty && form.email.$error.required }">\n\t\t\t\t\t<label for="email">E-mail:</label>\n\t\t\t\t\t<input type="text" name="email" id="email" class="form-control" ng-model="$ctrl.user.email" required />\n\t\t\t\t\t<span ng-show="form.email.$dirty && form.email.$error.required" class="help-block">To pole jest wymagane</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group" ng-class="{ \'has-error\': form.password.$dirty && form.password.$error.required }">\n\t\t\t\t\t<label for="password">Hasło</label>\n\t\t\t\t\t<input type="password" name="password" id="password" class="form-control" ng-model="$ctrl.user.password" required />\n\t\t\t\t\t<span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">To pole jest wymagane</span>\n\t\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="sModal__footer">\n\t\t<button class="sModal__button"\n\t\t        type="submit"\n\t\t        ng-class="{\'sModal__button--disabled\': form.$invalid}"\n\t\t        ng-disabled="form.$invalid">\n\t\t\tZarejestruj\n\t\t</button>\n\t</div>\n\t\n\t</form>\n</div>'},565:function(t,e){t.exports='<div class="topMenu">\n\t<div class="topMenu__title">\n\t\t{{ ::$ctrl.title }}\n\t</div>\n\t<div class="topMenu__controls">\n\t\t<div class="topMenu__signIn" ng-click="$ctrl.signIn()" ng-if="!$root.userInfo">\n\t\t\t<i class="fa fa-sign-in" aria-hidden="true"></i>\n\t\t\t<span>Zaloguj się</span>\n\t\t</div>\n\t\t<div class="topMenu__signIn" ng-click="$ctrl.signOut()" ng-if="$root.userInfo">\n\t\t\t<i class="fa fa-sign-out" aria-hidden="true"></i>\n\t\t\t<span>Wyloguj się</span>\n\t\t</div>\n\t</div>\n</div>'},566:function(t,e){t.exports='<div class="userMenu">\n\t<div class="userMenu__mobileList" ng-class="{\'userMenu__mobileList--expand\': $ctrl.expandMenu}">\n\t\t<i class="fa fa-arrow-circle-o-up userMenu__expand"\n\t\t   ng-class="{\'userMenu__expand--expand\': $ctrl.expandMenu}"\n\t\t   ng-click="$ctrl.expandMenu = !$ctrl.expandMenu" aria-hidden="true"></i>\n\t\t<ul class="userMenu__list">\n\t\t\t<li ng-click="$ctrl.favoritePlaces()">\n\t\t\t\t<i class="fa fa-heart" aria-hidden="true"></i>\n\t\t\t\tUlubione miejsca\n\t\t\t</li>\n\t\t\t<li ng-click="$ctrl.addPlace()">\n\t\t\t\t<i class="fa fa-map-marker" aria-hidden="true"></i>\n\t\t\t\t<span ng-if="$root.userInfo.account_type === 2">\n\t\t\t\t\tZaproponuj nowe miejsce\n\t\t\t\t</span>\n\t\t\t\t<span ng-if="$root.userInfo.account_type !== 2">\n\t\t\t\t\tDodaj nowe miejsce\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li ng-if="$root.userInfo.account_type !== 2" ng-click="$ctrl.newPlaces()">\n\t\t\t\t<i class="fa fa-check-square-o" aria-hidden="true"></i>\n\t\t\t\tPropozycje nowych miejsc\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>'},616:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.app=void 0;var a=i(n(33)),o=n(214),r=n(215),s=n(207),l=n(210),c=n(212),u=n(213),d=n(208),p=n(211),f=n(209);n(83);var v=i(n(216));n(204);var h=n(222).default,m=n(223).default,g=n(218).default,y=n(224).default,_=n(226).default,k=n(220).default,b=n(225).default,M=n(217).default,w=n(221).default,P=n(219).default,S=e.app="app";n(205),n(80),n(82),n(79),n(84),n(203),n(81),a.default.module(S,["ngSanitize","ngAnimate","ngTouch","ui.router","ui.select","ui.bootstrap"]).config(v.default).service("mapService",h).service("placesHelper",m).service("apiService",g).service("routesService",y).service("warsawApiService",_).service("geolocationService",k).service("userService",b).service("alertsService",M).service("loaderService",w).service("dataService",P).component("mainWrapper",s.MainWrapper).component("locationModal",l.LocationModal).component("signInModal",c.SignInModal).component("signUpModal",u.SignUpModal).component("addNewPlaceModal",d.AddNewPlaceModal).component("moderatePlacesModal",p.ModeratePlacesModal).component("favoritePlacesModal",f.FavoritePlacesModal).component("topMenu",o.TopMenu).component("userMenu",r.UserMenu).run(function(t){t.loaderOn()})}},[616]);